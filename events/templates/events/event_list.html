{% extends "base.html" %}
{% block content %}

<h3 class="page-title mb-4 text-center">University Events</h3>

<div class="row">
{% for event in events %}
  <div class="col-md-4 mb-4">
    <div class="card shadow border-0 h-100">
        <div class="card-body">
            <h5 class="fw-bold">{{ event.title }}</h5>
            <p class="text-muted">{{ event.description|truncatewords:15 }}</p>

            <p><strong>Date:</strong> {{ event.date }}</p>
            <p><strong>Venue:</strong> {{ event.venue }}</p>

            {% if event.is_paid %}
                <span class="badge bg-warning">Paid Event</span>
            {% else %}
                <span class="badge bg-success">Free Event</span>
            {% endif %}
        </div>

        <div class="card-footer bg-white border-0">
            <a href="{% url 'register_event' event.id %}" class="btn btn-primary btn-sm w-100 mb-2">
                Register
            </a>

            {% if event.is_paid %}
            <a href="{% url 'initiate_payment' event.id %}" class="btn btn-warning btn-sm w-100">
                Pay Ksh {{ event.price }}
            </a>
            {% endif %}
        </div>
    </div>
</div>
{% empty %}
    <p class="text-center">No events published.</p>
{% endfor %}
</div>

{% endblock %}
