<!DOCTYPE html>
<html>
<head>
    <title>UNEMS</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <nav class="navbar navbar-dark bg-dark px-3">
    <a class="navbar-brand text-white" href="/">UNEMS</a>

    <li class="nav-item">
        <a class="nav-link text-white" href="{% url 'public_notices' %}">Notices</a>
        <a class="nav-link text-white" href="{% url 'event_list' %}">Events</a>

    </li>

    {% if user.is_authenticated %}
        <a class="text-white" href="/logout/">Logout</a>
    {% else %}
        <a class="text-white" href="/theUsers/login/">Login</a>
    {% endif %}
</nav>

<div class="container mt-3">

  {% if messages %}
    {% for message in messages %}
      <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
      </div>
    {% endfor %}
  {% endif %}

</div>



    <div class="container mt-4">
        {% block content %}{% endblock %}
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        function markRead(id){
        fetch("{% url 'notification_mark_as_read' %}", {
            method: "POST",
            headers: {
            "X-CSRFToken": "{{ csrf_token }}",
            "Content-Type": "application/x-www-form-urlencoded"
            },
            body: "id="+id
        }).then(res => {
            if(res.ok){
            // decrement badge
            const el = document.getElementById('notif-count');
            if(el){
                const v = parseInt(el.innerText) || 0;
                el.innerText = Math.max(0, v-1);
            }
            }
        })
        }
    </script>
</body>
</html>

</html>
